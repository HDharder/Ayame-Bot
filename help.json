{
  "loot": {
    "name": "/loot",
    "description": "Inicia o processo de registro de loot de uma mesa que já foi registrada.",
    "permissions": "Narrador, Staff",
    "usage": "**Pré-requisito:** O Mestre deve ter usado `/registrar-mesa` para esta mesa.\n1. Use `/loot`.\n2. Selecione a mesa (ela só aparecerá se foi registrada).\n3. (Opcional) Adicione os drops de itens/materiais/misc etc. Itens marcados com `*` no final (ex: `Poção*`) serão dobrados se o jogador usar 'Double Gold'.\n4. Clique em 'Calcular Loot' para gerar a mensagem de distribuição.\n5. Os jogadores clicam em 'Pegar Loot' para selecionar seus itens e ativar o 'Double Gold' (que dobra o gold E os itens marcados com `*`).\n6. O Mestre clica em 'Encerrar Mesa' para salvar tudo nas planilhas.\n**Se falhar:** Use o comando `/relatorio` como alternativa manual."
  },
  "registrar-mesa": {
    "name": "/registrar-mesa",
    "description": "Registra os jogadores sorteados em uma mesa anunciada no histórico.",
    "permissions": "Narrador, Staff",
    "usage": "**Pré-requisito:** O Mestre deve ter usado `/abrir-mesa` para criar o anúncio da mesa.\n1. Use `/registrar-mesa`.\n2. Indique os jogadores nos parâmetros `primario` e `secundario`.\n3. Selecione a mesa (do `/abrir-mesa`) à qual eles pertencem.\n4. O bot irá atualizar a planilha 'Historico' e a contagem de 'Mesas Jogadas' (na coluna da semana correta) na aba 'Personagens'."
  },
  "abrir-mesa": {
    "name": "/abrir-mesa",
    "description": "Cria um anúncio de mesa com inscrições via reação.",
    "permissions": "Narrador, Staff",
    "usage": "1. Use `/abrir-mesa` e preencha todos os parâmetros.\n2. O bot criará um anúncio público. O Mestre pode reagir com o emote da mesa para fechar inscrições ou com ❌ para cancelar.\n3. Após fechar, use o botão 'Efetuar Sorteio'.\n**Importante:** Este comando é o primeiro passo. Você precisará usar `/registrar-mesa` depois."
  },
  "inventario": {
    "name": "/inventario",
    "description": "Exibe seu inventário ou registra um canal dedicado para ele.",
    "permissions": "Qualquer jogador (em canais permitidos)",
    "usage": "1. Use `/inventario` num canal de fórum (post) na categoria de inventários.\n2. Se você tiver múltiplos personagens, selecione qual deles será 'dono' deste canal.\n3. O bot exibirá seu inventário e salvará este canal. O loot de mesas encerradas (`/loot` ou `/relatorio`) atualizará esta mensagem automaticamente.\n**Importante:** Um canal só pode ser registrado por um único jogador."
  },
  "gasto": {
    "name": "/gasto",
    "description": "Registra um gasto (ouro ou itens) do seu personagem.",
    "permissions": "Qualquer jogador (no seu canal de inventário)",
    "usage": "Este comando **só funciona no canal de inventário** que você registrou com `/inventario`.\n1. Use `/gasto`.\n2. Preencha a `observacao` (obrigatório) com o motivo (ex: 'Compra de Poções').\n3. Preencha `ouro` (ex: `150`) ou `itens` (ex: `1x Poção, 2x Adaga`) ou ambos.\n4. O bot removerá os valores do seu inventário e atualizará a mensagem do inventário automaticamente."
  },
  "exibir": {
    "name": "/exibir",
    "description": "Exibe informações do seu personagem, como histórico de gastos.",
    "permissions": "Qualquer jogador (no seu canal de inventário)",
    "usage": "Use no canal do seu inventário.\n1. `/exibir opcao: Histórico de Gastos (Canal)` - Mostra os gastos do `/gasto`.\n2. `/exibir opcao: Histórico de Mesas Jogadas` - Mostra o loot recebido das mesas.\n3. `/exibir opcao: Histórico de Transações (Lojas)` - Mostra seu histórico de Compras/Vendas."
  },
  "staff": {
    "name": "/staff",
    "description": "Exibe o painel de controlo de staff com estatísticas e gestão.",
    "permissions": "Staff",
    "usage": "1. Use `/staff` para ver as estatísticas do servidor (Jogadores, Níveis, Mesas da Semana).\n2. O painel também mostra o estado da 'Caravana Bastião'.\n3. Se a caravana estiver pronta ('READY'), um botão aparecerá para distribuir os itens. Clicar nesse botão executará o `batchUpdateInventories` para todos os jogadores e limpará a aba da caravana."
  },
  "transacao": {
    "name": "/transacao",
    "description": "Inicia uma transação de compra, venda ou P2P.",
    "permissions": "Qualquer jogador (em canais de mercado ou inventário)",
    "usage": "**Lojas Normais:**\nUse dentro de um canal de mercado.\n1. O bot identifica o tipo de mercado (Compra, Venda, etc.).\n2. Selecione seu personagem.\n3. **Compra:** Selecione os itens (máx 5) e clique em 'Definir Quantidades' para abrir um modal.\n4. **Venda:** Selecione os itens do seu inventário para vender à loja (com preço fixo).\n\n**Transação P2P (Jogador-para-Jogador):**\n1. Use `/transacao` no canal de inventário de **outro jogador** (que deve estar marcado como `[Players]` na planilha).\n2. Selecione os itens do seu inventário.\n3. Clique em 'Definir Preço' e insira o valor total da venda.\n4. Uma proposta será enviada, e o Comprador (dono do canal) poderá 'Aceitar' ou 'Recusar'.\n5. Se aceite, a troca de itens/ouro é automática."
  },
  "relatorio": {
    "name": "/relatorio",
    "description": "Alternativa manual ao /loot. Registra loot e atualiza o inventário.",
    "permissions": "Narrador, Staff",
    "usage": "Use este comando **se o `/loot` falhar ou para entradas manuais**.\n1. Use `/relatorio`. O parâmetro `gold_total` é opcional; se deixado vazio, o bot rolará o gold automaticamente.\n2. Selecione a mesa registrada.\n3. Use os botões para adicionar drops (`Misc`, `Itens`, etc.) e 'Gold Extra' para cada jogador.\n4. Itens com colchetes (ex: `Arma +1 [Espada Longa]`) serão validados como `Arma +1` mas salvos com o nome completo.\n5. Ao finalizar, o bot cria o log e **atualiza o inventário** de todos os jogadores (somando o gold base + gold extra)."
  },
  "sortear": {
    "name": "/sortear",
    "description": "Realiza o sorteio de vagas do RPG (manual).",
    "permissions": "Narrador, Staff",
    "usage": "Usado principalmente se o botão 'Fechar Inscrição' do `/abrir-mesa` falhar, ou para sorteios manuais.\n1. Use `/sortear` e cole a lista de inscritos.\n2. Clique em 'Efetuar Sorteio'.\n3. (Opcional) Digite os níveis para filtrar os jogadores elegíveis (ex: `1,2,3`).\n4. O bot fará o sorteio baseado na prioridade."
  },
  "updates": {
    "name": "/updates",
    "description": "Mostra as últimas atualizações do bot.",
    "permissions": "Qualquer jogador",
    "usage": "Basta executar o comando `/updates` para ver o changelog da última versão."
  },
  "help": {
    "name": "/help",
    "description": "Mostra esta mensagem de ajuda.",
    "permissions": "Qualquer jogador (em canais permitidos)",
    "usage": "1. Use `/help` para ver a lista de todos os comandos.\n2. Use `/help [comando]` (ex: `/help loot`) para ver detalhes sobre um comando específico."
  }
}